<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoreLogic1 | Local Compiler</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/dracula.min.css">
    <style>
        .CodeMirror { height: 100%; border-radius: 0 0 12px 12px; font-size: 14px; }
        body { background-color: #020617; font-family: 'Inter', sans-serif; height: 100vh; display: flex; flex-direction: column; }
        .pane-container { flex: 1; display: flex; overflow: hidden; gap: 1rem; padding: 1rem; }
        iframe { background: white; border-radius: 12px; width: 100%; height: 100%; border: none; }
        .label-bar { background: #1e293b; padding: 8px 16px; border-radius: 12px 12px 0 0; font-size: 10px; font-weight: bold; letter-spacing: 1px; color: #94a3b8; display: flex; justify-content: space-between; align-items: center; }
    </style>
</head>
<body class="text-slate-200">

    <header class="p-4 border-b border-slate-800 flex justify-between items-center bg-slate-900/50">
        <div class="flex items-center gap-2">
            <div class="w-3 h-3 bg-sky-500 rounded-full animate-pulse"></div>
            <span class="text-xl font-black tracking-tighter uppercase text-white">CORE<span class="text-sky-400">LOGIC1</span></span>
        </div>
        <div class="flex gap-4">
            <button onclick="runCode()" class="bg-sky-500 hover:bg-sky-400 text-slate-900 px-6 py-2 rounded-lg font-bold transition-all text-sm">
                FORCE REFRESH
            </button>
        </div>
    </header>

    <main class="pane-container flex-col md:flex-row">
        <div class="flex-1 flex flex-col min-h-[300px]">
            <div class="label-bar">
                <span>INDEX.HTML (LIVE EDITOR)</span>
                <span class="text-sky-400">AUTO-SAVING</span>
            </div>
            <div class="flex-1 overflow-hidden shadow-2xl">
                <textarea id="editor"><!DOCTYPE html>
<html>
<head>
  <style>
    body { 
      background: linear-gradient(45deg, #0f172a, #1e293b); 
      color: white; 
      display: flex; 
      justify-content: center; 
      align-items: center; 
      height: 100vh; 
      margin: 0;
      font-family: sans-serif;
    }
    h1 { 
      font-size: 3rem; 
      text-shadow: 0 0 20px #0ea5e9;
      animation: float 3s ease-in-out infinite;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
  </style>
</head>
<body>
  <h1>Hello CoreLogic!</h1>
</body>
</html></textarea>
            </div>
        </div>

        <div class="flex-1 flex flex-col min-h-[300px]">
            <div class="label-bar">
                <span>LIVE PREVIEW</span>
                <div class="flex gap-1">
                    <div class="w-2 h-2 rounded-full bg-red-500"></div>
                    <div class="w-2 h-2 rounded-full bg-yellow-500"></div>
                    <div class="w-2 h-2 rounded-full bg-green-500"></div>
                </div>
            </div>
            <div class="flex-1 bg-white rounded-b-xl overflow-hidden shadow-2xl">
                <iframe id="preview"></iframe>
            </div>
        </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/htmlmixed/htmlmixed.min.js"></script>
    
    <script>
        // Initialize Editor with HTML Mixed mode
        const editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
            lineNumbers: true,
            theme: "dracula",
            mode: "htmlmixed",
            selectionPointer: true,
            autoCloseTags: true,
            matchBrackets: true
        });

        // The "Magic" - Writing to the iframe locally
        function runCode() {
            const preview = document.getElementById('preview').contentWindow.document;
            const code = editor.getValue();
            
            preview.open();
            preview.write(code);
            preview.close();
        }

        // Real-time update: Run code as the user types
        editor.on('change', () => {
            runCode();
        });

        // Initial run
        runCode();
    </script>
</body>
</html>
